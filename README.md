# IlmarÃ«

Reads the database generated by [an IRC link parser bot](https://github.com/nuxeh/url-bot-rs)
and makes the history available. At this stage in the development it is just available as JSON.

Two documentations of the API by [Swagger](http://localhost:8000/docs) and
[ReDoc]([Swagger](http://localhost:8000/redoc)) once you got everything up and running.

## Prerequisites

* [Podman](https://podman.io/getting-started/installation)
* Python v3
* Virtualenv for Python3

## How to install

### Notes

Instructions for Apache [adapted from Techmint](https://www.tecmint.com/install-apache-web-server-in-a-docker-container/).

`-p 8080:80` means public port 8080 will be redirected to port 80 on the container.

```sh
cd irc-link-history
podman build -t fastapi .
podman images

podman run -dit --name apache2 -p 80:80 -v $PWD/:/usr/local/apache2/htdocs/ httpd:2.4 #The local path might be wrong.
podman run --rm -v $PWD:/srv:z -p 8000:8000 --name fastapi -d fastapi
virualenv env
source env/bin/activate
pip install -r requirements.txt
```

Proceeed to start.

## How to start

```sh
podman run -dit --name apache2 -p 80:80 -v $PWD/:/usr/local/apache2/htdocs/ httpd:2.4 #The local path might be wrong.
podman run --rm -v $PWD:/srv:z -p 8000:8000 --name fastapi -d fastapi
source env/bin/activate
python3 main.py
```

## How to stop

```sh
podman stop apache2
podman stop fastapi
deactivate
```

## Roadmap

In no particular order.

* Serve as static page from API
* Remove Mithril.JS since it is not used after all
* Change to GraphQL
* Continous deployment
* Software tests
* Make asynchronous
* Don't assume everything is working and available
* Read database from bot
* Front end
  * Display
  * Search
  * Sort
  * Filter
  * Make the parsed links clickable
